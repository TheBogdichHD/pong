System.register("chunks:///_virtual/Ball.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScoreManager.ts","./index.js"],(function(e){var i,t,n,o,r,a,l,c,u,s,d,h,p,f,y,b,g;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Prefab,c=e.AudioClip,u=e.RigidBody2D,s=e.AudioSource,d=e.Collider2D,h=e.Contact2DType,p=e.Vec2,f=e.instantiate,y=e.Component},function(e){b=e.ScoreManager},function(e){g=e.hapticFeedback}],execute:function(){var m,S,B,v,_,w,z,A,C,P,M,E,O,V,D;r._RF.push({},"9af0dHqGENJqK1w/0XxG6Fw","Ball",void 0);var x=a.ccclass,I=a.property;e("Ball",(m=x("Ball"),S=I(l),B=I(c),v=I(c),m((z=i((w=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return i=e.call.apply(e,[this].concat(r))||this,n(i,"speed",z,o(i)),n(i,"topBoundary",A,o(i)),n(i,"bottomBoundary",C,o(i)),n(i,"minAngle",P,o(i)),n(i,"maxAngle",M,o(i)),n(i,"scoreEffectPrefab",E,o(i)),n(i,"hitSound",O,o(i)),n(i,"scoreSound",V,o(i)),n(i,"enableVibration",D,o(i)),i._rigidBody=null,i._lastScorer="player",i._audioSource=null,i._hapticInitialized=!1,i}t(i,e);var r=i.prototype;return r.onLoad=function(){this._rigidBody=this.getComponent(u),this._rigidBody.gravityScale=0,this._rigidBody.linearDamping=0,this._audioSource=this.getComponent(s);var e=this.getComponent(d);e&&e.on(h.BEGIN_CONTACT,this.onCollision,this)},r.onCollision=function(e,i){this.playHitSound()},r.triggerVibration=function(){if(this.enableVibration)try{g.impactOccurred.isAvailable()&&g.impactOccurred("medium")}catch(e){console.error("Vibration error:",e)}},r.playHitSound=function(){var e=.7+.3*Math.random();this._audioSource.volume=e,this._audioSource.playOneShot(this.hitSound,e)},r.playScoreSound=function(){var e=.7+.3*Math.random();this._audioSource.volume=e,this._audioSource.playOneShot(this.scoreSound,e)},r.start=function(){var e=this;this.scheduleOnce((function(){e.serveBall("player")}),.5)},r.update=function(e){this.node.position.y>=this.topBoundary?(this._lastScorer="player",b.Instance.addPlayerScore(),this.makeScore()):this.node.position.y<=this.bottomBoundary&&(this._lastScorer="bot",b.Instance.addBotScore(),this.makeScore())},r.makeScore=function(){this.spawnScoreEffect(this.node.position),this.playScoreSound(),this.triggerVibration(),this.resetBall()},r.serveBall=function(e){var i=this.maxAngle-this.minAngle,t=(this.minAngle+Math.random()*i)*Math.PI/180,n=Math.random()>.5?1:-1,o="player"===e?-1:1,r=new p(Math.sin(t)*this.speed*n,Math.cos(t)*this.speed*o);this._rigidBody.linearVelocity=r,console.log("Ball served toward "+("player"===e?"bot":"player"))},r.resetBall=function(){var e=this;this.node.setPosition(0,0,0),this._rigidBody.linearVelocity=p.ZERO,this.scheduleOnce((function(){e.serveBall(e._lastScorer)}),1)},r.spawnScoreEffect=function(e){if(this.scoreEffectPrefab){var i=f(this.scoreEffectPrefab);i.setPosition(e),this.node.parent.addChild(i),this.scheduleOnce((function(){return i.destroy()}),1)}},i}(y)).prototype,"speed",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),A=i(w.prototype,"topBoundary",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),C=i(w.prototype,"bottomBoundary",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-360}}),P=i(w.prototype,"minAngle",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),M=i(w.prototype,"maxAngle",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),E=i(w.prototype,"scoreEffectPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(w.prototype,"hitSound",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(w.prototype,"scoreSound",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(w.prototype,"enableVibration",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_=w))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/Bot.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,a,n,o,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,l=t.Node,u=t.Component}],execute:function(){var c,s,f,h,b,p,y,d,g,m;n._RF.push({},"1fbbc9C+8tAzJnWVNGFuWUa","Bot",void 0);var v=o.ccclass,_=o.property;t("BotController",(c=v("BotController"),s=_(l),c((b=e((h=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,r(e,"ball",b,a(e)),r(e,"moveSpeed",p,a(e)),r(e,"reactionDelay",y,a(e)),r(e,"difficulty",d,a(e)),r(e,"boundaryLeft",g,a(e)),r(e,"boundaryRight",m,a(e)),e._targetX=0,e._reactionTimer=0,e}i(e,t);var n=e.prototype;return n.start=function(){this.ball||console.error("Bot needs a ball reference!")},n.update=function(t){this.ball&&(this._reactionTimer+=t,this._reactionTimer>=this.reactionDelay&&(this._reactionTimer=0,this.calculateTargetPosition()),this.moveTowardsTarget(t))},n.calculateTargetPosition=function(){var t=this.ball.position.x,e=100*(1-this.difficulty),i=(2*Math.random()-1)*e;this._targetX=t+i,this._targetX=Math.max(this.boundaryLeft,Math.min(this.boundaryRight,this._targetX))},n.moveTowardsTarget=function(t){var e=this.node.position,i=this._targetX-e.x;if(!(Math.abs(i)<5)){var r=Math.sign(i)*this.moveSpeed*t,a=Math.abs(r)>Math.abs(i)?i:r;this.node.setPosition(e.x+a,e.y,e.z)}},n.setDifficulty=function(t){this.difficulty=Math.max(0,Math.min(1,t)),this.reactionDelay=.3-.2*this.difficulty,this.moveSpeed=200+200*this.difficulty},e}(u)).prototype,"ball",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=e(h.prototype,"moveSpeed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 350}}),y=e(h.prototype,"reactionDelay",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),d=e(h.prototype,"difficulty",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),g=e(h.prototype,"boundaryLeft",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-265}}),m=e(h.prototype,"boundaryRight",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 265}}),f=h))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.js","./index3.js"],(function(e){var n,t,a,o,s,r,i,l,c,u;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){a=e.cclegacy,o=e._decorator,s=e.view,r=e.ResolutionPolicy,i=e.Component},function(e){l=e.init,c=e.viewport},function(e){u=e.retrieveLaunchParams}],execute:function(){var p,g;a._RF.push({},"2b478Twp0hCOqiPxkVcsHCP","GameManager",void 0);var m=o.ccclass;o.property,e("GameManager",m("GameManager")(((g=function(e){function a(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(n=e.call.apply(e,[this].concat(a))||this).username="Name",n}n(a,e);var o=a.prototype;return o.onLoad=function(){a._instance=this;try{l();var e=u();if(console.log(e),console.log("Telegram Mini App initialized"),console.log("Platform:",e.tgWebAppPlatform),console.log("Version:",e.tgWebAppVersion),c.mount(),e.tgWebAppData){var n=e.tgWebAppData.user;n&&(console.log("User ID:",n.id),console.log("Username:",n.username),console.log("First Name:",n.first_name),this.username=n.username)}c.expand.isAvailable()&&c.expand(),c.requestFullscreen.isAvailable()&&c.requestFullscreen(),this.setupLandscape()}catch(e){console.log("Not in Telegram environment:",e),this.setupLandscape()}},o.setupLandscape=function(){s.setDesignResolutionSize(640,960,r.SHOW_ALL),s.resizeWithBrowserSize(!0)},t(a,null,[{key:"Instance",get:function(){return this._instance}}]),a}(i))._instance=null,p=g))||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Ball.ts","./Bot.ts","./GameManager.ts","./PlayerController.ts","./ScoreManager.ts"],(function(){return{setters:[null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,n,i,r,s,c,h,u,a,T;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Vec3,h=t.input,u=t.Input,a=t.UITransform,T=t.Component}],execute:function(){var l,p,f,y,v;r._RF.push({},"52a7fD4gnNPyr9zQP9zhkL0","PlayerController",void 0);var _=s.ccclass,d=s.property;t("PlayerController",_("PlayerController")((f=o((p=function(t){function o(){for(var o,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return o=t.call.apply(t,[this].concat(r))||this,n(o,"moveSpeed",f,i(o)),n(o,"boundaryRight",y,i(o)),n(o,"boundaryLeft",v,i(o)),o._moveDirection=0,o._currentPos=new c,o._isTouching=!1,o._targetTouchX=0,o}e(o,t);var r=o.prototype;return r.onLoad=function(){h.on(u.EventType.TOUCH_START,this.onTouchStart,this),h.on(u.EventType.TOUCH_MOVE,this.onTouchMove,this),h.on(u.EventType.TOUCH_END,this.onTouchEnd,this),h.on(u.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},r.onDestroy=function(){h.off(u.EventType.TOUCH_START,this.onTouchStart,this),h.off(u.EventType.TOUCH_MOVE,this.onTouchMove,this),h.off(u.EventType.TOUCH_END,this.onTouchEnd,this),h.off(u.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},r.onTouchStart=function(t){var o;this._isTouching=!0;var e=t.getUILocation(),n=null==(o=this.node.parent.getComponent(a))?void 0:o.convertToNodeSpaceAR(new c(e.x,e.y,0));n&&(this._targetTouchX=n.x)},r.onTouchMove=function(t){if(this._isTouching){var o,e=t.getUILocation(),n=null==(o=this.node.parent.getComponent(a))?void 0:o.convertToNodeSpaceAR(new c(e.x,e.y,0));n&&(this._targetTouchX=n.x)}},r.onTouchEnd=function(t){this._isTouching=!1},r.update=function(t){if(this.node.getPosition(this._currentPos),0!==this._moveDirection&&(this._currentPos.x+=this._moveDirection*this.moveSpeed*t),this._isTouching){var o=this._targetTouchX-this._currentPos.x;this._currentPos.x+=10*o*t}this._currentPos.x=Math.max(this.boundaryLeft,Math.min(this.boundaryRight,this._currentPos.x)),this.node.setPosition(this._currentPos)},o}(T)).prototype,"moveSpeed",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),y=o(p.prototype,"boundaryRight",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 275}}),v=o(p.prototype,"boundaryLeft",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-275}}),l=p))||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(e){var t,r,o,a,n,i,c,l,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized,n=e.createClass},function(e){i=e.cclegacy,c=e._decorator,l=e.Label,s=e.Component},function(e){u=e.GameManager}],execute:function(){var p,S,y,h,b,f,g,_;i._RF.push({},"b1aa6D523xOx6nBfwqroa4i","ScoreManager",void 0);var d=c.ccclass,L=c.property;e("ScoreManager",(p=d("ScoreManager"),S=L(l),y=L(l),p(((_=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,o(t,"playerScoreLabel",f,a(t)),o(t,"botScoreLabel",g,a(t)),t._playerScore=0,t._botScore=0,t}r(t,e);var i=t.prototype;return i.onLoad=function(){t._instance=this,this.updateDisplay()},i.start=function(){this.updateDisplay()},i.addPlayerScore=function(){this._playerScore++,console.log("Player scored! Score:",this._playerScore),this.updateDisplay()},i.addBotScore=function(){this._botScore++,console.log("Bot scored! Score:",this._botScore),this.updateDisplay()},i.updateDisplay=function(){this.playerScoreLabel&&(this.playerScoreLabel.string=u.Instance.username+": "+this._playerScore),this.botScoreLabel&&(this.botScoreLabel.string="Bot: "+this._botScore)},i.getPlayerScore=function(){return this._playerScore},i.getBotScore=function(){return this._botScore},i.resetScores=function(){this._playerScore=0,this._botScore=0,this.updateDisplay()},n(t,null,[{key:"Instance",get:function(){return this._instance}}]),t}(s))._instance=null,f=t((b=_).prototype,"playerScoreLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(b.prototype,"botScoreLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=b))||h));i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
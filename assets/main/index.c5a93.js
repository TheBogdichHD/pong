System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./telegram-web.ts"],(function(e){var n,a,t,s,o,r,i,c,l;return{setters:[function(e){n=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){t=e.cclegacy,s=e.Label,o=e._decorator,r=e.Component,i=e.screen,c=e.macro},function(e){l=e.TelegramWebApp}],execute:function(){var u,p,g,m,h,d;t._RF.push({},"2b478Twp0hCOqiPxkVcsHCP","GameManager",void 0);const{ccclass:I,property:b}=o;e("GameManager",(u=I("GameManager"),p=b({type:s,tooltip:"Name Label"}),u(((d=class e extends r{constructor(){super(...arguments),a(this,"nameLabel",h,this)}static get Instance(){return this._instance}onLoad(){i.on("orientation-change",this.onOrientationChange,this),e._instance?this.node.destroy():(e._instance=this,l.Instance.init().then((e=>{if(e.success){console.log("Telegram initialized");const e=l.Instance.getTelegramInitData();console.log("Raw init data:",e);const n=this.parseInitData(e);console.log("User ID:",n.user?.id),console.log("Username:",n.user?.username),this.setupPlayer(n.user)}})))}parseInitData(e){const n=new URLSearchParams(e),a={};return n.forEach(((e,n)=>{a[n]="user"===n?JSON.parse(decodeURIComponent(e)):e})),a}setupPlayer(e){e&&(this.nameLabel.string=e.username,console.log("Hello",e.username))}onOrientationChange(e){e!==c.ORIENTATION_LANDSCAPE_LEFT&&e!==c.ORIENTATION_LANDSCAPE_RIGHT||console.log("Landscape mode active")}})._instance=null,h=n((m=d).prototype,"nameLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=m))||g));t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameManager.ts","./PlayerController.ts","./telegram-web.ts"],(function(){return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,n,i,r,s,h,c,a,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e._decorator,r=e.Component,s=e.Vec3,h=e.input,c=e.Input,a=e.KeyCode,u=e.UITransform}],execute:function(){var y,T,p,l,_,b,d;n._RF.push({},"52a7fD4gnNPyr9zQP9zhkL0","PlayerController",void 0);const{ccclass:f,property:v}=i;e("PlayerController",f("PlayerController")((p=t((T=class extends r{constructor(){super(...arguments),o(this,"moveSpeed",p,this),o(this,"boundaryTop",l,this),o(this,"boundaryBottom",_,this),o(this,"enableKeyboard",b,this),o(this,"enableTouch",d,this),this._moveDirection=0,this._currentPos=new s,this._isTouching=!1,this._targetTouchY=0}onLoad(){this.enableKeyboard&&(h.on(c.EventType.KEY_DOWN,this.onKeyDown,this),h.on(c.EventType.KEY_UP,this.onKeyUp,this)),this.enableTouch&&(h.on(c.EventType.TOUCH_START,this.onTouchStart,this),h.on(c.EventType.TOUCH_MOVE,this.onTouchMove,this),h.on(c.EventType.TOUCH_END,this.onTouchEnd,this),h.on(c.EventType.TOUCH_CANCEL,this.onTouchEnd,this))}onDestroy(){this.enableKeyboard&&(h.off(c.EventType.KEY_DOWN,this.onKeyDown,this),h.off(c.EventType.KEY_UP,this.onKeyUp,this)),this.enableTouch&&(h.off(c.EventType.TOUCH_START,this.onTouchStart,this),h.off(c.EventType.TOUCH_MOVE,this.onTouchMove,this),h.off(c.EventType.TOUCH_END,this.onTouchEnd,this),h.off(c.EventType.TOUCH_CANCEL,this.onTouchEnd,this))}onKeyDown(e){switch(e.keyCode){case a.KEY_W:case a.ARROW_UP:this._moveDirection=1;break;case a.KEY_S:case a.ARROW_DOWN:this._moveDirection=-1}}onKeyUp(e){switch(e.keyCode){case a.KEY_W:case a.ARROW_UP:this._moveDirection=0;break;case a.KEY_S:case a.ARROW_DOWN:this._moveDirection=0}}onTouchStart(e){this._isTouching=!0;const t=e.getUILocation(),o=this.node.parent.getComponent(u)?.convertToNodeSpaceAR(new s(t.x,t.y,0));o&&(this._targetTouchY=o.y)}onTouchMove(e){if(this._isTouching){const t=e.getUILocation(),o=this.node.parent.getComponent(u)?.convertToNodeSpaceAR(new s(t.x,t.y,0));o&&(this._targetTouchY=o.y)}}onTouchEnd(e){this._isTouching=!1}update(e){if(this.node.getPosition(this._currentPos),0!==this._moveDirection&&(this._currentPos.y+=this._moveDirection*this.moveSpeed*e),this._isTouching){const t=this._targetTouchY-this._currentPos.y;this._currentPos.y+=10*t*e}this._currentPos.y=Math.max(this.boundaryBottom,Math.min(this.boundaryTop,this._currentPos.y)),this.node.setPosition(this._currentPos)}}).prototype,"moveSpeed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),l=t(T.prototype,"boundaryTop",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 250}}),_=t(T.prototype,"boundaryBottom",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-250}}),b=t(T.prototype,"enableKeyboard",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=t(T.prototype,"enableTouch",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=T))||y);n._RF.pop()}}}));

System.register("chunks:///_virtual/telegram-web.ts",["cc"],(function(e){var t,r,n;return{setters:[function(e){t=e.cclegacy,r=e.sys,n=e._decorator}],execute:function(){var s,o;t._RF.push({},"5d062LsWZJAwZbmvSS9Wt+/","telegram-web",void 0);const{ccclass:p,property:a}=n,i=new Promise(((e,t)=>{if(r.platform===r.Platform.MOBILE_BROWSER||r.platform===r.Platform.DESKTOP_BROWSER){const r=document.createElement("script");r.src="https://telegram.org/js/telegram-web-app.js",r.async=!0,r.onload=()=>{const t=setInterval((()=>{window.Telegram&&window.Telegram.WebApp&&(e(window.Telegram.WebApp),clearInterval(t))}),100)},r.onerror=()=>t(new Error("Unable to load TelegramWebApp SDK, please check logs.")),document.head.appendChild(r)}}));e("TelegramWebApp",p("TelegramWebApp")(((o=class e{constructor(){this._tgWebAppJS=null}static get Instance(){return e._instance||(e._instance=new e),e._instance}async init(){return this._tgWebAppJS=await i,this._tgWebAppJS?Promise.resolve({success:!0}):Promise.resolve({success:!1})}openTelegramLink(e){this._tgWebAppJS?this._tgWebAppJS.openTelegramLink(e):console.error("telegram web app is not inited!")}share(e,t){const r="https://t.me/share/url?url="+encodeURIComponent(e)+"&text="+encodeURIComponent(t||"");this.openTelegramLink(r)}shareToStory(e,t,r,n){if(!this._tgWebAppJS)return void console.error("telegram web app is not inited!");const s={text:t,widget_link:{url:r,name:n}};this._tgWebAppJS.shareToStory(e,s)}getTelegramWebApp(){return this._tgWebAppJS}getTelegramWebAppInitData(){return this._tgWebAppJS?this._tgWebAppJS.initDataUnsafe:(console.error("telegram web app is not inited!"),null)}getTelegramUser(){return this._tgWebAppJS?this._tgWebAppJS.initDataUnsafe.user:(console.error("telegram web app is not inited!"),null)}getTelegramInitData(){return this._tgWebAppJS?this._tgWebAppJS.initData:(console.error("telegram web app is not inited!"),null)}openInvoice(e,t){if(!this._tgWebAppJS)return console.error("telegram web app is not inited!"),null;this._tgWebAppJS.openInvoice(e,t)}alert(e){this._tgWebAppJS.showAlert(e)}})._instance=void 0,s=o))||s);t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});